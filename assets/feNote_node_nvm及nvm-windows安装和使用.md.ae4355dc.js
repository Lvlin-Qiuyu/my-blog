import{_ as s,o as n,c as a,Q as o}from"./chunks/framework.98be4c9c.js";const h=JSON.parse('{"title":"nvm 及 nvm-windows 的安装使用","description":"","frontmatter":{},"headers":[],"relativePath":"feNote/node/nvm及nvm-windows安装和使用.md","filePath":"feNote/node/nvm及nvm-windows安装和使用.md","lastUpdated":1700148230000}'),p={name:"feNote/node/nvm及nvm-windows安装和使用.md"},l=o(`<h1 id="nvm-及-nvm-windows-的安装使用" tabindex="-1">nvm 及 nvm-windows 的安装使用 <a class="header-anchor" href="#nvm-及-nvm-windows-的安装使用" aria-label="Permalink to &quot;nvm 及 nvm-windows 的安装使用&quot;">​</a></h1><p>node 的迭代速度很快，所以目前有很多 node 版本共存着。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/HBbQo3CygpeajPPrr4bKQ9fUY9WRpm7icRExPUYQqejficibRiavzcSwpW7Wrg4JiaFc46xaEPErqontTFmtLyFuGjQ/0?wx_fmt=jpeg" alt=""></p><p>有很多的包，都需要在特定版本的 node 环境下才能正常运行。LvLin 在使用 gitbook-cli 的时候，就发现它无法在 v16 版本的 node 环境中运行。</p><p>那遇到 node 环境不匹配时该怎么办？解决办法很简单，多装几个就好了（光想想就让人难受）。</p><p>为了方便处理多个 node 版本切换的问题，业界涌现了一众 node 版本管理工具：nvm、nvs、n。本文主要介绍 nvm 和 nvm-windows 的安装及使用。</p><h2 id="nvm" tabindex="-1"><a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noreferrer">nvm</a> <a class="header-anchor" href="#nvm" aria-label="Permalink to &quot;[nvm](https://github.com/nvm-sh/nvm)&quot;">​</a></h2><p>node 版本管理工具，支持 mac 和 linux 系统，windows 系统使用 nvm-windows 进行替代。</p><blockquote><p>由于 LvLin 使用的 windows 系统，所以这里仅做介绍，不做演示，具体使用可参考 nvm-windows。</p></blockquote><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><p>通过 shell 脚本进行安装：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bash</span></span></code></pre></div><p>安装好后，确认配置文件 <code>~/.bashrc</code> 是否存在以下片段，如果没有则手动加上：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> NVM_DIR</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;$([ </span><span style="color:#F97583;">-z</span><span style="color:#9ECBFF;"> &quot;\${</span><span style="color:#E1E4E8;">XDG_CONFIG_HOME-</span><span style="color:#9ECBFF;">}&quot; ] &amp;&amp; </span><span style="color:#79B8FF;">printf</span><span style="color:#9ECBFF;"> %s &quot;\${</span><span style="color:#E1E4E8;">HOME</span><span style="color:#9ECBFF;">}/.nvm&quot; </span><span style="color:#F97583;">||</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">printf</span><span style="color:#9ECBFF;"> %s &quot;\${</span><span style="color:#E1E4E8;">XDG_CONFIG_HOME</span><span style="color:#9ECBFF;">}/nvm&quot;)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[ </span><span style="color:#F97583;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">$NVM_DIR</span><span style="color:#9ECBFF;">/nvm.sh&quot;</span><span style="color:#E1E4E8;"> ] &amp;&amp; </span><span style="color:#B392F0;">\\.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">$NVM_DIR</span><span style="color:#9ECBFF;">/nvm.sh&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># This loads nvm</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> NVM_DIR</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;$([ </span><span style="color:#D73A49;">-z</span><span style="color:#032F62;"> &quot;\${</span><span style="color:#24292E;">XDG_CONFIG_HOME-</span><span style="color:#032F62;">}&quot; ] &amp;&amp; </span><span style="color:#005CC5;">printf</span><span style="color:#032F62;"> %s &quot;\${</span><span style="color:#24292E;">HOME</span><span style="color:#032F62;">}/.nvm&quot; </span><span style="color:#D73A49;">||</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">printf</span><span style="color:#032F62;"> %s &quot;\${</span><span style="color:#24292E;">XDG_CONFIG_HOME</span><span style="color:#032F62;">}/nvm&quot;)&quot;</span></span>
<span class="line"><span style="color:#24292E;">[ </span><span style="color:#D73A49;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">$NVM_DIR</span><span style="color:#032F62;">/nvm.sh&quot;</span><span style="color:#24292E;"> ] &amp;&amp; </span><span style="color:#6F42C1;">\\.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">$NVM_DIR</span><span style="color:#032F62;">/nvm.sh&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># This loads nvm</span></span></code></pre></div><p>执行 source 命令，使系统环境变量生效：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bashrc</span></span></code></pre></div><p>完成 nvm 的安装，查看版本号：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--version</span></span></code></pre></div><p>更多安装方法参考<a href="https://github.com/nvm-sh/nvm#installing-and-updating" target="_blank" rel="noreferrer">官方仓库</a>。</p><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><p>列出当前 nvm 可以安装的 node 版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ls-remote</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ls-remote</span></span></code></pre></div><p>安装具体的版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14.18</span><span style="color:#9ECBFF;">.0</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14.18</span><span style="color:#032F62;">.0</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span></span></code></pre></div><p>列出已安装的 node 版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ls</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ls</span></span></code></pre></div><p>切换 node 版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">use</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">use</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span></span></code></pre></div><p>当我们在 14 版本的 node 上安装了一些全局包，切换到 8 版本的 node 后，这些包需要重新安装才能使用。</p><p>这时候可以通过 <code>nvm reinstall-packages</code> 指令，一键安装全局包。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">use</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14.18</span><span style="color:#9ECBFF;">.0</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reinstall-packages</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">use</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14.18</span><span style="color:#032F62;">.0</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">reinstall-packages</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span></span></code></pre></div><p>这样，就在 v8 版本的 node 中也装上了跟 v14 版本 node 环境同样的全局包了。</p><h2 id="nvm-windows" tabindex="-1"><a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noreferrer">nvm-windows</a> <a class="header-anchor" href="#nvm-windows" aria-label="Permalink to &quot;[nvm-windows](https://github.com/coreybutler/nvm-windows)&quot;">​</a></h2><p>nvm 不支持 windows 系统，所以我们使用 nvm-windows 进行替代。</p><h3 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h3><p>到 <a href="https://github.com/coreybutler/nvm-windows/releases" target="_blank" rel="noreferrer">nvm-windows 仓库</a> 下载安装包，解压安装即可。</p><p>如果无法下载，可以关注 LvLin 的公众号【玩点前端】，发送【nvm】获取网盘资源进行下载。</p><p>安装完毕，以管理员身份打开 <code>PowerShell</code>，输入 <code>nvm version</code> 查看是否安装成功。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nvm version</span></span>
<span class="line"><span style="color:#B392F0;">1.1.8</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nvm version</span></span>
<span class="line"><span style="color:#6F42C1;">1.1.8</span></span></code></pre></div><h3 id="使用-1" tabindex="-1">使用 <a class="header-anchor" href="#使用-1" aria-label="Permalink to &quot;使用&quot;">​</a></h3><p><code>nvm list available</code>：列出可安装的 node 版本，可以缩写为 <code>nvm ls available</code>。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/HBbQo3CygpeajPPrr4bKQ9fUY9WRpm7iceYUu2RGASctcQic7bfhEzfWs3sL8zg6qdCWbgKHCiaw9vC2Wru1yZp9g/0?wx_fmt=jpeg" alt=""></p><p><code>nvm install</code>：安装指定版本的 node。安装 <code>v16.12.0</code>和<code>v14.18.0</code>版本的 node 如下图所示：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/HBbQo3CygpeajPPrr4bKQ9fUY9WRpm7icfPo7mFsHBwyhBy2YdiacwvrRCoR7jvicd6doyibicl0SOcHaLppS9vCMUg/0?wx_fmt=jpeg" alt=""></p><p><code>nvm list</code>：查看当前已安装的 node 版本，可以缩写为 <code>nvm ls</code>。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nvm list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">16.12.0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">14.18.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nvm list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">16.12.0</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">14.18.0</span></span></code></pre></div><p><code>nvm use &lt;version&gt;</code>：使用指定版本的 node 环境。</p><p>通过 <code>nvm list</code> 或 <code>nvm current</code> 可以查看当前使用的 node 版本。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/HBbQo3CygpeajPPrr4bKQ9fUY9WRpm7icDkCfeiacxboGkwwbiamelDZSzla7fzaAicNa2EPZOvb3ZxiaH4onfYIq5A/0?wx_fmt=jpeg" alt=""></p><p><code>nvm uninstall &lt;version&gt;</code>：卸载指定版本的 node。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nvm uninstall 14.18.0</span></span>
<span class="line"><span style="color:#B392F0;">Uninstalling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">node</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v14.18.0...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">done</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nvm uninstall 14.18.0</span></span>
<span class="line"><span style="color:#6F42C1;">Uninstalling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">node</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v14.18.0...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">done</span></span></code></pre></div><p><code>nvm node_mirror [url]</code>：切换 node 镜像源，<code>nvm npm_mirror [url]</code>：切换 npm 镜像源。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nvm node_mirror https://npm.taobao.org/mirrors/node/</span></span>
<span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nvm npm_mirror https://npm.taobao.org/mirrors/npm/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nvm node_mirror https://npm.taobao.org/mirrors/node/</span></span>
<span class="line"><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nvm npm_mirror https://npm.taobao.org/mirrors/npm/</span></span></code></pre></div><p>更多命令可以通过 <code>nvm</code> 进行查看。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/HBbQo3CygpeajPPrr4bKQ9fUY9WRpm7icZGGauqQrUQ00Y88wU2HVTQLfpTb1XQMPFqQ7Ly65Q1icYWSgaKTyOhQ/0?wx_fmt=jpeg" alt=""></p><h3 id="异常" tabindex="-1">异常 <a class="header-anchor" href="#异常" aria-label="Permalink to &quot;异常&quot;">​</a></h3><ol><li><p>出现 <code>exit status 1</code>，通常是由于权限不够，需要使用管理员身份运行 <code>PowerShell</code>。</p><blockquote><p><strong>nvm-windows runs in an Admin shell</strong>. You&#39;ll need to start <code>powershell</code> or Command Prompt as Administrator to use nvm-windows</p></blockquote></li><li><p><code>npm</code> 安装包时异常，尝试切换成淘宝镜像源。</p><p>方式1：<code>nvm npm_mirror https://npm.taobao.org/mirrors/npm/</code></p><p>方式2：找到安装 <code>nvm</code> 的文件夹下的 <code>settings.txt</code> 文件，新增镜像源配置：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">root: C:\\nvm</span></span>
<span class="line"><span style="color:#E1E4E8;">path: C:\\nodejs</span></span>
<span class="line"><span style="color:#85E89D;">+ node_mirror: http://npm.taobao.org/mirrors/node/</span></span>
<span class="line"><span style="color:#85E89D;">+ npm_mirror: https://npm.taobao.org/mirrors/npm/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">root: C:\\nvm</span></span>
<span class="line"><span style="color:#24292E;">path: C:\\nodejs</span></span>
<span class="line"><span style="color:#22863A;">+ node_mirror: http://npm.taobao.org/mirrors/node/</span></span>
<span class="line"><span style="color:#22863A;">+ npm_mirror: https://npm.taobao.org/mirrors/npm/</span></span></code></pre></div></li></ol>`,57),e=[l];function t(c,r,i,d,y,E){return n(),a("div",null,e)}const v=s(p,[["render",t]]);export{h as __pageData,v as default};
